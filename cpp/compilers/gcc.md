### Полезные ключи

Ошибки сборки (поиск):

* -E использовать только препроцессор (пропустить все остальные шаги и показывает какие сигнатуры используются)
* -v показать все команды (процессор, ассемблер, компоновщик), которые вызывает gcc, что компилируется и что компонуемая
* есть два списка #include для "" и <> файлов, -Idir - добавляет dir к обоим
    спискам, -iquotedir - добавить quotedir к списку для "", [отладочные
    опции](https://youtu.be/Y6U9662gaa8?t=1081) для include
* -H - вывести дерево #include
* -dM - вывести #define для всех предопределенных переменных
* -dD - оставить директивы #define в обработанном файле
* -dI - оставить директивы #include в обработанном файле (дерево -H -dI -E)
* -P не генерировать номера строк
* readelf -s - какие символы в объектном файле, какие символы - внешние
* objdump -d -r - где используются внешние символы

Интересные флаги:

* -fomit-frame-pointer — позволит избавиться от мусора в коде (возня со стеком) и перестает в генерируемом коде использовать регистр rbp, адресуя все напрямую от rsp
* Обычно правило для сборки binary содержит пугающую опцию -Wl,-rpath,. Компилятор gcc сам вызывает линковщик ld, когда это надо и передает ему нужные параметры сборки, избавляя нас от ненужной платформенно-зависимой волокиты. Но иногда мы все-таки должны вмешаться в этот процесс и передать линковщику "свою" опцию. Для этого используется опция компилятора -Wl,option,optargs,... Расшифровываю: передать линковщику (-Wl) опцию option с аргументами optargs. В нашем случае мы передаем линковщику опцию -rpath с аргументом . (точка, текущий каталог). Возникает вопрос: что означает опция -rpath? Как уже говорилось, линковщик ищет библиотеки в определенных местах; обычно это каталоги /lib и /usr/lib, иногда /usr/local/lib. Опция -rpath просто добавляет к этому списку еще один каталог. В нашем случае это текущий каталог. Без указания опции -rpath, линковщик "молча" соберет программу, но при запуске нас будет ждать сюрприз: программа не запустится из-за отсутствия библиотеки.
* -Wl,--strip-all — выпиливает символы (экспресс похудение)
* При программировании МК часто используют флаг компилятора (GCC) -ffunction-sections и флаг компоновщика -gc-sections: первый кладёт все компилируемые функции в отдельные секции, второй удаляет неиспользуемые секции. 

### Интересные патчи

[static-print для Gcc 7.1](https://github.com/saarraz/static-print/blob/master/static_print.patch)

